/*DROPING TABLES*/
DROP TABLE IF EXISTS "TRAVELPOLICY" CASCADE;
DROP TABLE IF EXISTS "AUTOPOLICY" CASCADE;
DROP TABLE IF EXISTS "INSURANCEPOLICY" CASCADE;

/*CREATE TABLES*/
CREATE TABLE "INSURANCEPOLICY"
   (	"INSURANCETYPE" VARCHAR(30) NOT NULL,
	"POLICY_ID" SERIAL PRIMARY KEY NOT NULL,
	"ENDDATE" TIMESTAMP,
	"STARDATE" TIMESTAMP,
	"COVERAGELEVEL" VARCHAR(30),
	"CUSTOMER_ID" INTEGER
   );

CREATE TABLE "AUTOPOLICY"
  (
    "POLICY_ID" SERIAL NOT NULL,
    "ACCIDENTS_CATEGORY" VARCHAR(30),
    "THEFT_CATEGORY" VARCHAR(30),
    "BENEFICIARY_ID" INTEGER,
      CONSTRAINT AUTOPOLICY_POLICY_ID FOREIGN KEY ("POLICY_ID")
      REFERENCES "INSURANCEPOLICY" ("POLICY_ID") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE
);

CREATE TABLE "TRAVELPOLICY"
  (
    "POLICY_ID" SERIAL NOT NULL,
    "HEALTH_CATEGORY" VARCHAR(30),
    "BENEFICIARY_ID" INTEGER,
      CONSTRAINT TRAVELPOLICY FOREIGN KEY ("POLICY_ID")
      REFERENCES "INSURANCEPOLICY" ("POLICY_ID") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE
);

/*INSERT DATA*/
/*INSURANCEPOLICY*/
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (1,'AUTO','2019-12-12','2018-12-12','GOLD',1);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (2,'AUTO','2019-10-08','2015-10-08','SILVER',2);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (3,'AUTO','2019-08-30','2018-08-30','SILVER',3);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (4,'AUTO','2020-12-12','2018-12-12','BRONZE',4);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (5,'AUTO','2022-01-01','2012-01-01','BRONZE',5);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (6,'AUTO','2022-01-01','2012-01-01','BRONZE',6);

INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (7,'TRAVEL','2022-01-01','2018-01-01','BRONZE',1);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (8,'TRAVEL','2021-01-01','2015-01-01','GOLD',3);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (9,'TRAVEL','2020-01-01','2017-01-01','SILVER',4);
INSERT INTO "INSURANCEPOLICY" ("POLICY_ID","INSURANCETYPE", "ENDDATE", "STARDATE", "COVERAGELEVEL", "CUSTOMER_ID") VALUES (10,'TRAVEL','2020-01-01','2019-01-01','BRONZE',5);

/*AUTOPOLICY*/
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (1,'ROAD_ACCIDENT','DAMAGED',1);
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (2,'NATURAL_DISASTER','RETURNED',2);
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (3,'ROAD_ACCIDENT','NOT_RETURNED',3);
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (4,'ROAD_ACCIDENT','NOT_RETURENED',4);
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (5,'ALL_ACCIDENTS','NOT_RETURNED',5);
INSERT INTO "AUTOPOLICY" ("POLICY_ID","ACCIDENTS_CATEGORY", "THEFT_CATEGORY", "BENEFICIARY_ID") VALUES (6,'ALL_ACCIDENTS','DAMAGED',7);

/*TRAVELPOLICY*/
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (7,'TRANSPORT_ACCIDENTS',1);
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (8,'ANOTHER_ACCIDENTS',3);
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (9,'TRANSPORT_ACCIDENTS',4);
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (10,'ANOTHER_ACCIDENTS',5);
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (8,'TRANSPORT_ACCIDENTS',6);
INSERT INTO "TRAVELPOLICY" ("POLICY_ID","HEALTH_CATEGORY", "BENEFICIARY_ID") VALUES (10,'ALL_ACCIDENTS',7);